#pragma checksum "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "a08c28e3846c22430373dd098b906ac29cf388c5"
// <auto-generated/>
#pragma warning disable 1591
namespace Oqtane.Modules.Admin.Modules
{
    #line hidden
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using System;

#line default
#line hidden
#line 2 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using System.Linq;

#line default
#line hidden
#line 3 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using System.Collections.Generic;

#line default
#line hidden
#line 4 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#line 6 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#line 7 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#line 8 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 9 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#line 11 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Models;

#line default
#line hidden
#line 12 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Modules;

#line default
#line hidden
#line 13 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Modules.Controls;

#line default
#line hidden
#line 14 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Providers;

#line default
#line hidden
#line 15 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Security;

#line default
#line hidden
#line 16 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Services;

#line default
#line hidden
#line 17 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Shared;

#line default
#line hidden
#line 18 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Themes;

#line default
#line hidden
#line 19 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Themes.Controls;

#line default
#line hidden
#line 20 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.UI;

#line default
#line hidden
#line 21 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/_Imports.razor"
using Oqtane.Enums;

#line default
#line hidden
    public partial class Settings : ModuleBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<Oqtane.Modules.Controls.TabStrip>(0);
            __builder.AddAttribute(1, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(2, "\n    ");
                __builder2.OpenComponent<Oqtane.Modules.Controls.TabPanel>(3);
                __builder2.AddAttribute(4, "Name", "Settings");
                __builder2.AddAttribute(5, "Heading", "Module Settings");
                __builder2.AddAttribute(6, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(7, "\n");
#line 10 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
         if (_containers != null)
        {

#line default
#line hidden
                    __builder3.AddContent(8, "            ");
                    __builder3.OpenElement(9, "table");
                    __builder3.AddAttribute(10, "class", "table table-borderless");
                    __builder3.AddMarkupContent(11, "\n                ");
                    __builder3.OpenElement(12, "tr");
                    __builder3.AddMarkupContent(13, "\n                    ");
                    __builder3.OpenElement(14, "td");
                    __builder3.AddMarkupContent(15, "\n                        ");
                    __builder3.OpenComponent<Oqtane.Modules.Controls.Label>(16);
                    __builder3.AddAttribute(17, "For", "title");
                    __builder3.AddAttribute(18, "HelpText", "Enter the title of the module");
                    __builder3.AddAttribute(19, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.AddContent(20, "Title: ");
                    }
                    ));
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(21, "\n                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(22, "\n                    ");
                    __builder3.OpenElement(23, "td");
                    __builder3.AddMarkupContent(24, "\n                        ");
                    __builder3.OpenElement(25, "input");
                    __builder3.AddAttribute(26, "id", "title");
                    __builder3.AddAttribute(27, "type", "text");
                    __builder3.AddAttribute(28, "name", "Title");
                    __builder3.AddAttribute(29, "class", "form-control");
                    __builder3.AddAttribute(30, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 18 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                                                _title

#line default
#line hidden
                    ));
                    __builder3.AddAttribute(31, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => _title = __value, _title));
                    __builder3.SetUpdatesAttributeName("value");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(32, "\n                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(33, "\n                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(34, "\n                ");
                    __builder3.OpenElement(35, "tr");
                    __builder3.AddMarkupContent(36, "\n                    ");
                    __builder3.OpenElement(37, "td");
                    __builder3.AddMarkupContent(38, "\n                        ");
                    __builder3.OpenComponent<Oqtane.Modules.Controls.Label>(39);
                    __builder3.AddAttribute(40, "For", "container");
                    __builder3.AddAttribute(41, "HelpText", "Select the module\'s container");
                    __builder3.AddAttribute(42, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.AddContent(43, "Container: ");
                    }
                    ));
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(44, "\n                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(45, "\n                    ");
                    __builder3.OpenElement(46, "td");
                    __builder3.AddMarkupContent(47, "\n                        ");
                    __builder3.OpenElement(48, "select");
                    __builder3.AddAttribute(49, "id", "container");
                    __builder3.AddAttribute(50, "class", "form-control");
                    __builder3.AddAttribute(51, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 26 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                            _containerType

#line default
#line hidden
                    ));
                    __builder3.AddAttribute(52, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => _containerType = __value, _containerType));
                    __builder3.SetUpdatesAttributeName("value");
                    __builder3.AddMarkupContent(53, "\n                            ");
                    __builder3.OpenElement(54, "option");
                    __builder3.AddAttribute(55, "value", "-");
                    __builder3.AddContent(56, "<Inherit From Page Or Site>");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(57, "\n");
#line 28 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                             foreach (var container in _containers)
                            {

#line default
#line hidden
                    __builder3.AddContent(58, "                                ");
                    __builder3.OpenElement(59, "option");
                    __builder3.AddAttribute(60, "value", 
#line 30 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                container.TypeName

#line default
#line hidden
                    );
                    __builder3.AddContent(61, 
#line 30 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                     container.Name

#line default
#line hidden
                    );
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(62, "\n");
#line 31 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                            }

#line default
#line hidden
                    __builder3.AddContent(63, "                        ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(64, "\n                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(65, "\n                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(66, "\n                ");
                    __builder3.OpenElement(67, "tr");
                    __builder3.AddMarkupContent(68, "\n                    ");
                    __builder3.OpenElement(69, "td");
                    __builder3.AddMarkupContent(70, "\n                        ");
                    __builder3.OpenComponent<Oqtane.Modules.Controls.Label>(71);
                    __builder3.AddAttribute(72, "For", "allpages");
                    __builder3.AddAttribute(73, "HelpText", "Indicate if this module should be displayed on all pages");
                    __builder3.AddAttribute(74, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.AddContent(75, "Display On All Pages? ");
                    }
                    ));
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(76, "\n                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(77, "\n                    ");
                    __builder3.OpenElement(78, "td");
                    __builder3.AddMarkupContent(79, "\n                        ");
                    __builder3.OpenElement(80, "select");
                    __builder3.AddAttribute(81, "id", "allpages");
                    __builder3.AddAttribute(82, "class", "form-control");
                    __builder3.AddAttribute(83, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 40 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                           _allPages

#line default
#line hidden
                    ));
                    __builder3.AddAttribute(84, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => _allPages = __value, _allPages));
                    __builder3.SetUpdatesAttributeName("value");
                    __builder3.AddMarkupContent(85, "\n                            ");
                    __builder3.OpenElement(86, "option");
                    __builder3.AddAttribute(87, "value", "True");
                    __builder3.AddContent(88, "Yes");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(89, "\n                            ");
                    __builder3.OpenElement(90, "option");
                    __builder3.AddAttribute(91, "value", "False");
                    __builder3.AddContent(92, "No");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(93, "\n                        ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(94, "\n                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(95, "\n                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(96, "\n                ");
                    __builder3.OpenElement(97, "tr");
                    __builder3.AddMarkupContent(98, "\n                    ");
                    __builder3.OpenElement(99, "td");
                    __builder3.AddMarkupContent(100, "\n                        ");
                    __builder3.OpenComponent<Oqtane.Modules.Controls.Label>(101);
                    __builder3.AddAttribute(102, "For", "page");
                    __builder3.AddAttribute(103, "HelpText", "The page that the module is on");
                    __builder3.AddAttribute(104, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.AddContent(105, "Page: ");
                    }
                    ));
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(106, "\n                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(107, "\n                    ");
                    __builder3.OpenElement(108, "td");
                    __builder3.AddMarkupContent(109, "\n                        ");
                    __builder3.OpenElement(110, "select");
                    __builder3.AddAttribute(111, "id", "page");
                    __builder3.AddAttribute(112, "class", "form-control");
                    __builder3.AddAttribute(113, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 51 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                       _pageId

#line default
#line hidden
                    ));
                    __builder3.AddAttribute(114, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => _pageId = __value, _pageId));
                    __builder3.SetUpdatesAttributeName("value");
                    __builder3.AddMarkupContent(115, "\n");
#line 52 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                             foreach (Page p in PageState.Pages)
                            {
                                if (UserSecurity.IsAuthorized(PageState.User, PermissionNames.View, p.Permissions))
                                {

#line default
#line hidden
                    __builder3.AddContent(116, "                                    ");
                    __builder3.OpenElement(117, "option");
                    __builder3.AddAttribute(118, "value", 
#line 56 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                    p.PageId

#line default
#line hidden
                    );
                    __builder3.AddContent(119, 
#line 56 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                new string('-', p.Level * 2)

#line default
#line hidden
                    );
                    __builder3.AddContent(120, 
#line 56 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                                               p.Name

#line default
#line hidden
                    );
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(121, "\n");
#line 57 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                }
                            }

#line default
#line hidden
                    __builder3.AddContent(122, "                        ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(123, "\n                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(124, "\n                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(125, "\n            ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(126, "\n");
#line 63 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
        }

#line default
#line hidden
                    __builder3.AddContent(127, "    ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(128, "\n    ");
                __builder2.OpenComponent<Oqtane.Modules.Controls.TabPanel>(129);
                __builder2.AddAttribute(130, "Name", "Permissions");
                __builder2.AddAttribute(131, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(132, "\n");
#line 66 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
         if (_permissions != null)
        {

#line default
#line hidden
                    __builder3.AddContent(133, "            ");
                    __builder3.OpenElement(134, "table");
                    __builder3.AddAttribute(135, "class", "table table-borderless");
                    __builder3.AddMarkupContent(136, "\n                ");
                    __builder3.OpenElement(137, "tr");
                    __builder3.AddMarkupContent(138, "\n                    ");
                    __builder3.OpenElement(139, "td");
                    __builder3.AddMarkupContent(140, "\n                        ");
                    __builder3.OpenComponent<Oqtane.Modules.Controls.PermissionGrid>(141);
                    __builder3.AddAttribute(142, "EntityName", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 71 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                     EntityNames.Module

#line default
#line hidden
                    ));
                    __builder3.AddAttribute(143, "PermissionNames", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 71 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                                           _permissionNames

#line default
#line hidden
                    ));
                    __builder3.AddAttribute(144, "Permissions", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 71 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                                                                           _permissions

#line default
#line hidden
                    ));
                    __builder3.AddComponentReferenceCapture(145, (__value) => {
#line 71 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                                                                                                               _permissionGrid = (Oqtane.Modules.Controls.PermissionGrid)__value;

#line default
#line hidden
                    }
                    );
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(146, "\n                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(147, "\n                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(148, "\n            ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(149, "\n");
#line 75 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
        }

#line default
#line hidden
                    __builder3.AddContent(150, "    ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(151, "\n");
#line 77 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
     if (_settingsModuleType != null)
    {

#line default
#line hidden
                __builder2.AddContent(152, "        ");
                __builder2.OpenComponent<Oqtane.Modules.Controls.TabPanel>(153);
                __builder2.AddAttribute(154, "Name", "ModuleSettings");
                __builder2.AddAttribute(155, "Heading", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#line 79 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                  _settingstitle

#line default
#line hidden
                ));
                __builder2.AddAttribute(156, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(157, "\n            ");
                    __builder3.AddContent(158, 
#line 80 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
             DynamicComponent

#line default
#line hidden
                    );
                    __builder3.AddMarkupContent(159, "\n        ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(160, "\n");
#line 82 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
    }

#line default
#line hidden
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(161, "\n");
            __builder.OpenElement(162, "button");
            __builder.AddAttribute(163, "type", "button");
            __builder.AddAttribute(164, "class", "btn btn-success");
            __builder.AddAttribute(165, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 84 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                                        SaveModule

#line default
#line hidden
            ));
            __builder.AddContent(166, "Save");
            __builder.CloseElement();
            __builder.AddMarkupContent(167, "\n");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Routing.NavLink>(168);
            __builder.AddAttribute(169, "class", "btn btn-secondary");
            __builder.AddAttribute(170, "href", 
#line 85 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
                                          NavigateUrl()

#line default
#line hidden
            );
            __builder.AddAttribute(171, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddContent(172, "Cancel");
            }
            ));
            __builder.CloseComponent();
        }
        #pragma warning restore 1998
#line 87 "/Users/cam/Desktop/oqtane.framework/Oqtane.Client/Modules/Admin/Modules/Settings.razor"
       
    private List<ThemeControl> _containers = new List<ThemeControl>();
    private string _title;
    private string _containerType;
    private string _allPages = "false";
    private string _permissionNames = "";
    private string _permissions = null;
    private string _pageId;
    private PermissionGrid _permissionGrid;
    private Type _settingsModuleType;
    private string _settingstitle = "Other Settings";
    private object _settings;

    public override SecurityAccessLevel SecurityAccessLevel => SecurityAccessLevel.Edit;
    public override string Title => "Module Settings";

    private RenderFragment DynamicComponent { get; set; }

    protected override async Task OnInitializedAsync()
    {
        _title = ModuleState.Title;
        _containers = ThemeService.GetContainerControls(await ThemeService.GetThemesAsync(), PageState.Page.ThemeType);
        _containerType = ModuleState.ContainerType;
        if (!string.IsNullOrEmpty(PageState.Page.DefaultContainerType) && _containerType == PageState.Page.DefaultContainerType)
        {
            _containerType = "-";
        }
        if (_containerType == PageState.Site.DefaultContainerType)
        {
            _containerType = "-";
        }
        _allPages = ModuleState.AllPages.ToString();
        _permissions = ModuleState.Permissions;
        _permissionNames = ModuleState.ModuleDefinition.PermissionNames;
        _pageId = ModuleState.PageId.ToString();

        _settingsModuleType = Type.GetType(ModuleState.ModuleType);
        if (_settingsModuleType != null)
        {
            var moduleobject = Activator.CreateInstance(_settingsModuleType) as IModuleControl;
            _settingstitle = moduleobject.Title;
            if (string.IsNullOrEmpty(_settingstitle))
            {
                _settingstitle = "Other Settings";
            }

            DynamicComponent = builder =>
            {
                builder.OpenComponent(0, _settingsModuleType);
                builder.AddComponentReferenceCapture(1, inst => { _settings = Convert.ChangeType(inst, _settingsModuleType); });
                builder.CloseComponent();
            };
        }
    }

    private async Task SaveModule()
    {
        var pagemodule = await PageModuleService.GetPageModuleAsync(ModuleState.PageModuleId);
        pagemodule.PageId = int.Parse(_pageId);
        pagemodule.Title = _title;
        pagemodule.ContainerType = (_containerType != "-") ? _containerType : string.Empty;
        if (!string.IsNullOrEmpty(pagemodule.ContainerType) && pagemodule.ContainerType == PageState.Page.DefaultContainerType)
        {
            pagemodule.ContainerType = string.Empty;
        }
        if (!string.IsNullOrEmpty(pagemodule.ContainerType) && pagemodule.ContainerType == PageState.Site.DefaultContainerType)
        {
            pagemodule.ContainerType = string.Empty;
        }
        await PageModuleService.UpdatePageModuleAsync(pagemodule);
        await PageModuleService.UpdatePageModuleOrderAsync(pagemodule.PageId, pagemodule.Pane);

        var module = ModuleState;
        module.AllPages = bool.Parse(_allPages);
        module.Permissions = _permissionGrid.GetPermissions();
        await ModuleService.UpdateModuleAsync(module);

        if (_settingsModuleType != null)
        {
            var moduleType = Type.GetType(ModuleState.ModuleType);
            if (moduleType != null)
            {
                moduleType.GetMethod("UpdateSettings")?.Invoke(_settings, null); // method must be public in settings component
            }
        }

        NavigationManager.NavigateTo(NavigateUrl());
    }


#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IPageModuleService PageModuleService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IModuleService ModuleService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IThemeService ThemeService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
    }
}
#pragma warning restore 1591
